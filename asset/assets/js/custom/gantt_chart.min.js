!function(t){"use strict";var e="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}),t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in document});var s=function(){return!1},i=function(e,s){return this.settings=s,this.el=e,this.$el=t(e),this._initElements(),this};i.DATA_KEY="kinetic",i.DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},i.prototype.start=function(e){this.settings=t.extend(this.settings,e),this.velocity=e.velocity||this.velocity,this.velocityY=e.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},i.prototype.end=function(){this.settings.decelerate=!0},i.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,t.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},i.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(e).css("cursor","")},i.prototype.attach=function(){this.$el.hasClass(e)||(this._attachListeners(this.$el),this.$el.addClass(e).css("cursor",this.settings.cursor))},i.prototype._initElements=function(){this.$el.addClass(e),t.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,t(document).mouseup(t.proxy(this._resetMouse,this)).click(t.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},i.prototype._initEvents=function(){var e=this;this.settings.events={touchStart:function(t){var s;e._useTarget(t.target,t)&&(s=t.originalEvent.touches[0],e.threshold=e._threshold(t.target,t),e._start(s.clientX,s.clientY),t.stopPropagation())},touchMove:function(t){var s;e.mouseDown&&(s=t.originalEvent.touches[0],e._inputmove(s.clientX,s.clientY),t.preventDefault&&t.preventDefault())},inputDown:function(t){e._useTarget(t.target,t)&&(e.threshold=e._threshold(t.target,t),e._start(t.clientX,t.clientY),e.elementFocused=t.target,"IMG"===t.target.nodeName&&t.preventDefault(),t.stopPropagation())},inputEnd:function(t){e._useTarget(t.target,t)&&(e._end(),e.elementFocused=null,t.preventDefault&&t.preventDefault())},inputMove:function(t){e.mouseDown&&(e._inputmove(t.clientX,t.clientY),t.preventDefault&&t.preventDefault())},scroll:function(s){t.isFunction(e.settings.moved)&&e.settings.moved.call(e,e.settings),s.preventDefault&&s.preventDefault()},inputClick:function(t){return Math.abs(e.velocity)>0?(t.preventDefault(),!1):void 0},dragStart:function(t){return(!e._useTarget(t.target,t)||!e.elementFocused)&&void 0}},this._attachListeners(this.$el,this.settings)},i.prototype._inputmove=function(e,s){var i=this.$el;if(this.el,(!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var n=e-this.xpos,a=s-this.ypos;if(this.threshold>0){var o=Math.sqrt(n*n+a*a);if(this.threshold>o)return;this.threshold=0}this.elementFocused&&(t(this.elementFocused).blur(),this.elementFocused=null,i.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var r=this.scrollLeft(),l=this.scrollTop();this.scrollLeft(this.settings.x?r-n:r),this.scrollTop(this.settings.y?l-a:l),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=e,this.ypos=s,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),t.isFunction(this.settings.moved)&&this.settings.moved.call(this,this.settings)}},i.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity)},i.prototype._end=function(){this.xpos&&this.prevXPos&&!1===this.settings.decelerate&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},i.prototype._useTarget=function(e,s){return!t.isFunction(this.settings.filterTarget)||!1!==this.settings.filterTarget.call(this,e,s)},i.prototype._threshold=function(e,s){return t.isFunction(this.settings.threshold)?this.settings.threshold.call(this,e,s):this.settings.threshold},i.prototype._start=function(t,e){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=t,this.ypos=e},i.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},i.prototype._decelerateVelocity=function(t,e){return 0===Math.floor(Math.abs(t))?0:t*e},i.prototype._capVelocity=function(t,e){var s=t;return t>0?t>e&&(s=e):0-e>t&&(s=0-e),s},i.prototype._setMoveClasses=function(t){var e=this.settings,s=this.$el;s.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right),this.velocity>0&&s.addClass(t.right),this.velocity<0&&s.addClass(t.left),this.velocityY>0&&s.addClass(t.down),this.velocityY<0&&s.addClass(t.up)},i.prototype._move=function(){var e=(this.$el,this.el),s=this,i=s.settings;i.x&&e.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=i.decelerate?s._decelerateVelocity(this.velocity,i.slowdown):this.velocity)):this.velocity=0,i.y&&e.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=i.decelerate?s._decelerateVelocity(this.velocityY,i.slowdown):this.velocityY)):this.velocityY=0,s._setMoveClasses(i.deceleratingClass),t.isFunction(i.moved)&&i.moved.call(this,i),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){s.moving=!1,s._move()})):s.stop()},i.prototype._getScroller=function(){var e=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(e=t(window)),e},i.prototype.scrollLeft=function(t){var e=this._getScroller();return"number"!=typeof t?e.scrollLeft():(e.scrollLeft(t),void(this.settings.scrollLeft=t))},i.prototype.scrollTop=function(t){var e=this._getScroller();return"number"!=typeof t?e.scrollTop():(e.scrollTop(t),void(this.settings.scrollTop=t))},i.prototype._attachListeners=function(){var e=this.$el,i=this.settings;t.support.touch&&e.bind("touchstart",i.events.touchStart).bind("touchend",i.events.inputEnd).bind("touchmove",i.events.touchMove),e.mousedown(i.events.inputDown).mouseup(i.events.inputEnd).mousemove(i.events.inputMove),e.click(i.events.inputClick).scroll(i.events.scroll).bind("selectstart",s).bind("dragstart",i.events.dragStart)},i.prototype._detachListeners=function(){var e=this.$el,i=this.settings;t.support.touch&&e.unbind("touchstart",i.events.touchStart).unbind("touchend",i.events.inputEnd).unbind("touchmove",i.events.touchMove),e.unbind("mousedown",i.events.inputDown).unbind("mouseup",i.events.inputEnd).unbind("mousemove",i.events.inputMove),e.unbind("click",i.events.inputClick).unbind("scroll",i.events.scroll).unbind("selectstart",s).unbind("dragstart",i.events.dragStart)},t.Kinetic=i,t.fn.kinetic=function(e,s){return this.each(function(){var n=t(this),a=n.data(i.DATA_KEY),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);a||n.data(i.DATA_KEY,a=new i(this,o)),"string"==typeof e&&a[e](s)})}}(window.jQuery||window.Zepto),function(t,e){function s(t){var e="";if(!(t=parseInt(t,10))||1>t)return e;for(;t;)e+="0",--t;return e}function i(t,e,i){return null==t&&(t=""),t=""+t,(i?t:"")+s(e-t.length)+(i?"":t)}function n(t,e){for(var s=t.length;--s;)if(e(t[s]))return t[s]}function a(t,e){var s,i=0,n=t.length;for("function"!=typeof e&&(s=e,e=function(t){return t===s});i<n;){if(e(t[i]))return t[i];i+=1}}function o(t,e){var s=0,i=t.length;if(t&&i)for(;s<i&&!1!==e(t[s],s);)s+=1}function r(t,e){var s=0,i=t.length,n=[];if(!t||!i)return n;for(;s<i;)n[s]=e(t[s],s),s+=1;return n}function l(t,e){return r(t,function(t){return t[e]})}function c(t){var e=[];return o(t,function(t){t&&e.push(t)}),e}function d(t){var e=[];return o(t,function(t){a(e,t)||e.push(t)}),e}function h(t,e){var s=[];return o(t,function(t){o(e,function(e){t===e&&s.push(t)})}),d(s)}function u(t,e){var s=[];return o(t,function(i,n){if(!e(i))return s=t.slice(n),!1}),s}function v(t,e){return u(t.slice().reverse(),e).reverse()}function p(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}var g;if("function"==typeof require)try{g=require("moment")}catch(t){}if(!g&&t.moment&&(g=t.moment),!g)throw"Moment Duration Format cannot find Moment.js";g.duration.fn.format=function(){var t,e,n,f,m,w;t=[].slice.call(arguments);var y=p({},this.format.defaults),b=g.duration(this);return y.duration=this,o(t,function(t){"string"==typeof t||"function"==typeof t?y.template=t:"number"==typeof t?y.precision=t:"[object Object]"===Object.prototype.toString.call(t)&&p(y,t)}),n=y.types="[object Array]"===Object.prototype.toString.call(y.types)?y.types:y.types.split(" "),"function"==typeof y.template&&(y.template=y.template.apply(y)),t=new RegExp(r(n,function(t){return y[t].source}).join("|"),"g"),f=function(t){return a(n,function(e){return y[e].test(t)})},e=r(y.template.match(t),function(t,e){var s=f(t);return{index:e,length:t.length,token:"escape"===s?t.replace(y.escape,"$1"):t,type:"escape"===s||"general"===s?null:s}},this),(m=h(n,d(c(l(e,"type"))))).length?(o(m,function(t,s){var i,n,a,r,l;i=b.as(t),n=0<i?Math.floor(i):Math.ceil(i),a=i-n,r=s+1===m.length,l=!s,o(e,function(e){e.type===t&&(p(e,{value:i,wholeValue:n,decimalValue:a,isLeast:r,isMost:l}),l&&null==y.forceLength&&1<e.length&&(y.forceLength=!0))}),b.subtract(n,t)}),y.trim&&(e=("left"===y.trim?u:v)(e,function(t){return!(t.isLeast||null!=t.type&&t.wholeValue)})),w=!1,"right"===y.trim&&e.reverse(),e=r(e,function(t){var e,n;if(!t.type)return t.token;if(e=t.isLeast&&0>y.precision?(Math.floor(t.wholeValue*Math.pow(10,y.precision))*Math.pow(10,-y.precision)).toString():t.wholeValue.toString(),e=e.replace(/^\-/,""),1<t.length&&(w||t.isMost||y.forceLength)&&(e=i(e,t.length)),t.isLeast&&0<y.precision)switch((n=t.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/)).length){case 1:e+="."+i(n[0],y.precision,!0).slice(0,y.precision);break;case 2:e+="."+i(n[1],y.precision,!0).slice(0,y.precision);break;case 3:e+="."+i(s(+n[2]-1)+(n[0]||"0")+n[1],y.precision,!0).slice(0,y.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}return t.isMost&&0>t.value&&(e="-"+e),w=!0,e}),"right"===y.trim&&e.reverse(),e.join("")):l(e,"token").join("")},g.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var t=this.duration;switch(n(this.types,function(e){return t._data[e]})){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}}(this),function(t){function e(e){function s(){var e=Math.floor(l.slideWidth/l.cellWidth+5),s=a.getBoundaryDatesFromData(l.data,e);l.start=l.startDate?moment(l.startDate,"MM/DD/YYYY")._d:s[0],l.end=l.endDate?moment(l.endDate,"MM/DD/YYYY")._d:s[1],o.each(function(){var e=t(this),s=t("<div>",{class:"ganttview"});new i(s,l).render(),e.append(s);t("div.ganttview-vtheader",e).outerWidth(),t("div.ganttview-slide-container",e).outerWidth();new n(e,l).apply()})}var o=this,r={showWeekends:!0,showToday:!0,toggleProjects:!0,cellWidth:20,slideWidth:400,kineticScroll:!0,startDate:!1,endDate:!1,startToday:!1,behavior:{clickable:!1,draggable:!0,resizable:!0}},l=t.extend(!0,r,e);l.data?s():l.dataUrl&&t.getJSON(l.dataUrl,function(t){l.data=t,s()})}function s(t,e){if("setSlideWidth"==t){var s=$("div.ganttview",this);s.each(function(){var t=$("div.ganttview-vtheader",s).outerWidth();$(s).width(t+e+1),$("div.ganttview-slide-container",this).width(e)})}}t.fn.ganttView=function(){var t=Array.prototype.slice.call(arguments);1==t.length&&"object"==typeof t[0]&&e.call(this,t[0]),2==t.length&&"string"==typeof t[0]&&s.call(this,t[0],t[1])};var i=function(e,s){function i(t,e){var s=[];s[t.getFullYear()]=[],s[t.getFullYear()][t.getMonth()]=[t];for(var i=t;moment(e).isAfter(i);){var n=moment(i).add(1,"days")._d;s[n.getFullYear()]||(s[n.getFullYear()]=[]),s[n.getFullYear()][n.getMonth()]||(s[n.getFullYear()][n.getMonth()]=[]),s[n.getFullYear()][n.getMonth()].push(n),i=n}return s}function n(e,s){for(var i=t("<div>",{class:"ganttview-vtheader"}),n=0;n<s.length;n++){var a=t("<div>",{class:"ganttview-vtheader-group"});a.append(t("<div>",{class:"ganttview-vtheader-group-name",id:"groupId_"+n}).append(s[n].name).append("<span/>"));for(var o=t("<div>",{class:"ganttview-vtheader-series"}),r=0;r<s[n].series.length;r++){var l=t("<div>",{class:"ganttview-vtheader-series-row"});if(s[n].series[r].sub_series){var c=t("<div>",{class:"series-content"}),d=t("<div>",{class:"series-dates"});series_users=t("<div>",{class:"series-users"}),c.append('<div class="series-name">'+s[n].series[r].name+"</div>");for(var h=0;h<s[n].series[r].sub_series.length;h++){var u=h>0?'<span class="date-sep">|</span>':"",v=s[n].series[r].sub_series[h];if(v.user_avatar){var p=t("<div>",{class:"series-user"});v.user_name;user_avatar=v.user_avatar,p.append('<span><img src="'+user_avatar+'"/></span>'),series_users.append(p),l.append(series_users)}d.append(function(){return u+moment(v.start,"MM/DD/YYYY").format("D MMM")+" - "+moment(v.end,"MM/DD/YYYY").format("D MMM")}),c.append(d),l.append(c)}}else l.append(function(){return(s[n].series[r].user_avatar?"<div class='series-user'><span><img src='"+s[n].series[r].user_avatar+"' /></span></div>":"")+"<div class='series-content'><div class=\"series-name\">"+s[n].series[r].name+"</div><div class='series-dates'>"+moment(s[n].series[r].start,"MM/DD/YYYY").format("D MMM")+" - "+moment(s[n].series[r].end,"MM/DD/YYYY").format("D MMM")+"</div></div>"});o.append(l)}a.append(o),i.append(a)}e.append(i)}function o(e,s,i,n,o,r){var l=t("<div>",{class:"ganttview-hzheader"}),c=t("<div>",{class:"ganttview-hzheader-months"}),d=t("<div>",{class:"ganttview-hzheader-days"}),h=0;for(var u in s)for(var v in s[u]){var p=s[u][v].length*i;h+=p,c.append(t("<div>",{class:"ganttview-hzheader-month",css:{width:p-1+"px"}}).append(moment(parseInt(v)+1,"M").format("MMMM")+" "+u));for(var g in s[u][v]){var f=t("<div>",{class:"ganttview-hzheader-day"});a.isWeekend(s[u][v][g])&&n&&f.addClass("ganttview-weekend"),moment(s[u][v][g]).isSame(Date.now(),"day")&&o&&f.addClass("ganttview-today"),moment(s[u][v][g]).isSame(Date.now(),"day")&&r&&f.addClass("ganttview-startToday"),d.append(f.append(s[u][v][g].getDate()))}}c.css("width",h+"px"),d.css("width",h+"px"),l.append(c).append(d),e.append(l)}function r(e,s,i,n,o,r){var l=t("<div>",{class:"ganttview-grid"}),c=t("<div>",{class:"ganttview-grid-row"});for(var d in i)for(var h in i[d])for(var u in i[d][h]){var v=t("<div>",{class:"ganttview-grid-row-cell"});a.isWeekend(i[d][h][u])&&o&&v.addClass("ganttview-weekend"),moment(i[d][h][u]).isSame(Date.now(),"day")&&r&&v.addClass("ganttview-today"),c.append(v)}var p=t("div.ganttview-grid-row-cell",c).length*n;c.css("width",p+"px"),l.css("width",p+"px");for(var g=0;g<s.length;g++){l.append(t("<div>",{class:"ganttview-grid-spacer","data-click-target":"groupId_"+g}));for(var f=0;f<s[g].series.length;f++)l.append(c.clone().addClass("groupId_"+g))}e.append(l)}function l(e,s){for(var i=t("<div>",{class:"ganttview-blocks"}),n=0;n<s.length;n++){i.append(t("<div>",{class:"ganttview-block-spacer"}));for(var a=0;a<s[n].series.length;a++)i.append(t("<div>",{class:"ganttview-block-container groupId_"+n}))}e.append(i)}function c(e,s,i,n){for(var o=t("div.ganttview-blocks div.ganttview-block-container",e),r=0,l=0;l<s.length;l++)for(var c=0;c<s[l].series.length;c++){if(s[l].series[c].sub_series){var h=s[l].series[c].sub_series,u=s[l].series[c].name.replace(/(<([^>]+)>)/gi," ");$.each(h,function(e,c){var v=a.daysBetween(c.start,c.end)+1,p=a.daysBetween(n,c.start),g=c.user_name?" ("+c.user_name+")":"",f=t("<div>",{class:"ganttview-block",title:u+g,css:{width:v*i-9+"px",left:p*i+3+"px"}});d(f,s[l],h[e]),c.color&&f.css("background-color",c.color);var m=c.title?c.link?'<a href="'+c.link+'" title="'+c.link+'">'+c.title+"</a>":c.title:moment.duration(v,"days").format();c.link?f.append(t("<div>",{class:"ganttview-block-text"}).html(m)):f.append(t("<div>",{class:"ganttview-block-text"}).text(m)),t(o[r]).append(f)})}else{var v=s[l].series[c],p=v.name.replace(/(<([^>]+)>)/gi," "),g=a.daysBetween(v.start,v.end)+1,f=a.daysBetween(n,v.start),m=t("<div>",{class:"ganttview-block",title:p,css:{width:g*i-9+"px",left:f*i+3+"px"}});d(m,s[l],v),s[l].series[c].color&&m.css("background-color",s[l].series[c].color);var w=v.title?v.link?'<a href="'+v.link+'" title="'+v.link+'">'+v.title+"</a>":v.title:moment.duration(g,"days").format();v.link?m.append(t("<div>",{class:"ganttview-block-text"}).html(w)):m.append(t("<div>",{class:"ganttview-block-text"}).text(w)),t(o[r]).append(m)}r++}t(".ganttview-blocks").css({width:$(e).width()})}function d(e,s,i){var n={name:s.name};t.extend(n,i),e.data("block-data",n)}function h(e){t("div.ganttview-grid-row div.ganttview-grid-row-cell:last-child",e).addClass("last"),t("div.ganttview-hzheader-days div.ganttview-hzheader-day:last-child",e).addClass("last"),t("div.ganttview-hzheader-months div.ganttview-hzheader-month:last-child",e).addClass("last")}function u(t){$("div.ganttview-vtheader-group-name",t).addClass("toggle_enabled").on("click",function(){$thisId=$(this).attr("id"),$(this).hasClass("projectHidden")?($(this).removeClass("projectHidden").next("div").children().velocity("slideDown",{duration:180,easing:easing_swiftOut}),$(".ganttview-block-container."+$thisId).show(),$(".ganttview-grid-row."+$thisId).velocity("slideDown",{duration:180,easing:easing_swiftOut})):($(this).addClass("projectHidden").next("div").children().velocity("slideUp",{duration:180,easing:easing_swiftOut}),$(".ganttview-block-container."+$thisId).hide(),$(".ganttview-grid-row."+$thisId).velocity("slideUp",{duration:180,easing:easing_swiftOut}))}),$("div.ganttview-grid-spacer",t).on("click",function(){$("#"+$(this).attr("data-click-target")).click()})}function v(e){var s=t("div.ganttview-slide-container",e);$(s).kinetic({y:!1,filterTarget:function(t,e){return!($(t).closest(".ganttview-block").length||$(t).closest(".ganttview-grid-spacer").length)}})}return{render:function(){n(e,s.data);var d=t("<div>",{class:"ganttview-slide-container"});dates=i(s.start,s.end),o(d,dates,s.cellWidth,s.showWeekends,s.showToday,s.startToday),r(d,s.data,dates,s.cellWidth,s.showWeekends,s.showToday),l(d,s.data),c(d,s.data,s.cellWidth,s.start),e.append(d),t(e).find(".ganttview-blocks").width(d.find(".ganttview-grid").width()),h(e.parent()),s.toggleProjects&&u(e),s.kineticScroll&&!Modernizr.touch&&v(e),s.startToday&&setTimeout(function(){var t=a.daysBetween(s.start,moment()._d);d.scrollLeft(t*s.cellWidth)},100)}}},n=function(e,s){function i(e,s){t("div.ganttview-block",e).on("click",function(){s&&s(t(this).data("block-data"))})}function n(e,s,i,n){t("div.ganttview-block",e).resizable({grid:s,handles:"e,w",stop:function(){var a=t(this);o(e,a,s,i),n&&n(a.data("block-data"))}})}function a(e,s,i,n){t("div.ganttview-block",e).draggable({axis:"x",grid:[s,s],containment:"parent",stop:function(){var a=t(this);o(e,a,s,i),n&&n(a.data("block-data"))}})}function o(e,s,i,n){var a=t("div.ganttview-slide-container",e),o=a.scrollLeft(),r=s.offset().left-a.offset().left-1+o,l=Math.round(r/i),c=moment(n).add(l,"days");s.data("block-data").start=c;var d=s.outerWidth(),h=Math.round(d/i)-1;s.data("block-data").end=moment(c).add(h,"days"),s.data("block-data").title||t("div.ganttview-block-text",s).text(moment.duration(h+1,"days").format())}return{apply:function(){s.behavior.clickable&&i(e,s.behavior.onClick),s.behavior.resizable&&n(e,s.cellWidth,s.start,s.behavior.onResize),s.behavior.draggable&&a(e,s.cellWidth,s.start,s.behavior.onDrag)}}},a={daysBetween:function(t,e){return t&&e?(t=Date.parse(t),e=Date.parse(e),1901==moment(t)._d.getYear()||8099==moment(e)._d.getYear()?0:moment(e).diff(moment(t),"days")):0},isWeekend:function(t){return t.getDay()%6==0},getBoundaryDatesFromData:function(t,e){var s=new Date;maxEnd=new Date;for(var i=0;i<t.length;i++)for(var n=0;n<t[i].series.length;n++){var a=Date.parse(t[i].series[n].start),o=Date.parse(t[i].series[n].end);0==i&&0==n&&(s=a,maxEnd=o),moment(s).isAfter(a)&&(s=a),moment(maxEnd).isBefore(o)&&(maxEnd=o)}return moment(maxEnd).diff(s,"days")<e&&(maxEnd=moment(s).add(e,"days")),[moment(s)._d,moment(maxEnd)._d]}}}(jQuery);